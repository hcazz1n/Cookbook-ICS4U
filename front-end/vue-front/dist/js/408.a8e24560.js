"use strict";(self["webpackChunkvue_front"]=self["webpackChunkvue_front"]||[]).push([[408],{8408:function(e,s,t){t.r(s),t.d(s,{default:function(){return k}});var i=t(3396),o=t(7139);const c={class:"hero is-fullheight-with-navbar has-text-centered",id:"account-profile-hero"},r={class:"columns",id:"account-columns"},l={class:"column is-3 is-offset-1",id:"profile-column"},a={class:"container",id:"account-profile-container"},n=["src"],u={class:"username"},h=(0,i._)("h2",{class:"biography"},"Biography",-1),p={class:"biography-content"},d={class:"column is-8",id:"favourite-recipes"},g={class:"container",id:"account-favourite-recipe"},f=(0,i._)("h1",{class:"title"},"Favourite Recipes",-1),v=["src"],m={class:"text-favourite-recipe"};function R(e,s,t,R,_,b){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{id:"logout",class:"login-register-button logout",onClick:s[0]||(s[0]=e=>b.logout())}," Logout "),(0,i._)("section",c,[(0,i._)("div",r,[(0,i._)("div",l,[(0,i._)("div",a,[(0,i._)("img",{class:"profile-circle",src:`${this.user.profilePic}`},null,8,n),(0,i._)("h1",u,(0,o.zw)(this.user.userName),1),h,(0,i._)("p",p,(0,o.zw)(this.user.bio),1)])]),(0,i._)("div",d,[(0,i._)("div",g,[f,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.objectFavouritedRecipes,(e=>((0,i.wg)(),(0,i.iD)("li",{class:"favourite-recipe-list",key:e.name},[(0,i._)("img",{class:"c-recipe favourite-account-img",src:`${e.images}`},null,8,v),(0,i._)("div",m,(0,o.zw)(e.author)+"'s Dish: "+(0,o.zw)(e.name),1)])))),128))])])])])])],64)}t(7658);var _=t(4161);window.addEventListener("load",(function(){window.scrollBy(0,-2e3)}));var b={data(){return{recipes:[],filteredRecipes:[],favouritedRecipes:[],objectFavouritedRecipes:[],user:[]}},methods:{fetchRecipes(){var e=sessionStorage.getItem("userName");_.Z.get("http://localhost:3000/api/recipes").then((s=>{this.recipes=s.data,console.log(this.recipes);for(let t=0;t<this.recipes.length;t++)this.recipes[t].author===e&&(this.filteredRecipes=[...this.filteredRecipes,this.recipes[t]]);console.log(this.filteredRecipes)})).catch((e=>{console.log(e)}))},fetchUsers(){var e=sessionStorage.getItem("user_id");_.Z.get(`http://localhost:3000/api/users/${e}`).then((e=>{this.user=e.data,console.log(this.user.userName),console.log(this.user.bio);for(let s=0;s<this.user.favouriteRecipes.length;s++)this.favouritedRecipes.includes(this.user.favouriteRecipes[s])?console.log("has already"):this.favouritedRecipes=[...this.favouritedRecipes,this.user.favouriteRecipes[s]];console.log(this.favouritedRecipes);for(let s=0;s<this.favouritedRecipes.length;s++){let e=this.favouritedRecipes[s];_.Z.get(`http://localhost:3000/api/recipes/${e}`).then((e=>{console.log(e.data),null==e.data?console.log("hello"):this.objectFavouritedRecipes=[...this.objectFavouritedRecipes,e.data]}))}console.log(this.objectFavouritedRecipes)})).catch((e=>{console.log(e)}))},logout(){_.Z.get("http://localhost:3000/logout").then((e=>{console.log(e),sessionStorage.setItem("user_id",""),sessionStorage.setItem("userDescription",""),sessionStorage.setItem("userName",""),sessionStorage.setItem("loggedIn",!1),this.$router.push("/")})).catch((e=>{console.log(e)}))}},beforeMount(){this.fetchRecipes(),this.fetchUsers()}},w=t(89);const I=(0,w.Z)(b,[["render",R]]);var k=I}}]);
//# sourceMappingURL=408.a8e24560.js.map